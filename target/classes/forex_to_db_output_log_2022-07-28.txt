AzureAD+JuhaVälimäki@VRNXLHT029 MINGW64 ~/eclipse-space/forex_to_db/src/main/docker
$ apikey=vGLeIBxS5cqpW6nbrEEIIbzWGmmCAbEF run_max_hours=1 docker-compose up
Creating network "docker_default" with the default driver
Building forex_to_db
#1 [internal] load build definition from Dockerfile
#1 sha256:2650d37e6ece4a071ba91bb4dd856b92e25251548ba6c89c0e64146c5b206dae
#1 transferring dockerfile: 32B done
#1 DONE 0.0s

#2 [internal] load .dockerignore
#2 sha256:da356e92d7e1fab32a9fd0325d8824f9b45199feb5b48b7b02a0988e630e98c6
#2 transferring context: 2B done
#2 DONE 0.0s

#3 [internal] load metadata for docker.io/library/openjdk:17
#3 sha256:070859071f3364a783b1e78d7bcc03c3c19aa6cd16c964fb53668630ef756087
#3 DONE 3.4s

#4 [1/2] FROM docker.io/library/openjdk:17@sha256:528707081fdb9562eb819128a9f85ae7fe000e2fbaeaf9f87662e7b3f38cb7d8
#4 sha256:78196c97cd0cbb2a440f0aa7eed5aa03f7b97943dd0eea3fb3c64123f413b47f
#4 DONE 0.0s

#5 [internal] load build context
#5 sha256:7fca40509647d4b998c74d7bdae46ef3737809e3dc709cda0bbc1633ca7f0cc7
#5 transferring context: 31.70MB 0.1s done
#5 DONE 0.2s

#4 [1/2] FROM docker.io/library/openjdk:17@sha256:528707081fdb9562eb819128a9f85ae7fe000e2fbaeaf9f87662e7b3f38cb7d8
#4 sha256:78196c97cd0cbb2a440f0aa7eed5aa03f7b97943dd0eea3fb3c64123f413b47f
#4 CACHED

#6 [2/2] COPY *.jar forex_to_db.jar
#6 sha256:e038e49d76dae91f86fdaea4281eac23d787a1681cac02f26aecbd0ee7a4ba3f
#6 DONE 0.1s

#7 exporting to image
#7 sha256:e8c613e07b0b7ff33893b694f7759a10d42e180f2b4dc349fb57dc6b71dcab00
#7 exporting layers 0.1s done
#7 writing image sha256:65366c04e7f5b706facae60feac428af257e91f38c643a86e611d5f6c1b13292 done
#7 naming to docker.io/library/docker-spring-boot-postgres:latest done
#7 DONE 0.2s
Image for service forex_to_db was built because it did not already exist. To rebuild this image you must use `docker-compose build` or `docker-compose up --build`.
Creating forex_db ...
Creating forex_db ... done
Creating forex_to_db ...
Creating forex_to_db ... done
Attaching to forex_db, forex_to_db
forex_db       |
forex_db       | PostgreSQL Database directory appears to contain a database; Skipping initialization
forex_db       |
forex_db       | 2022-07-28 15:47:03.208 UTC [1] LOG:  starting PostgreSQL 14.4 (Debian 14.4-1.pgdg110+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 10.2.1-6) 10.2.1 20210110, 64-bit
forex_db       | 2022-07-28 15:47:03.209 UTC [1] LOG:  listening on IPv4 address "0.0.0.0", port 5432
forex_db       | 2022-07-28 15:47:03.209 UTC [1] LOG:  listening on IPv6 address "::", port 5432
forex_db       | 2022-07-28 15:47:03.221 UTC [1] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
forex_db       | 2022-07-28 15:47:03.234 UTC [26] LOG:  database system was interrupted; last known up at 2022-07-28 15:42:12 UTC
forex_db       | 2022-07-28 15:47:03.878 UTC [26] LOG:  database system was not properly shut down; automatic recovery in progress
forex_db       | 2022-07-28 15:47:03.882 UTC [26] LOG:  redo starts at 0/1728DD0
forex_db       | 2022-07-28 15:47:03.882 UTC [26] LOG:  invalid record length at 0/1728E08: wanted 24, got 0
forex_db       | 2022-07-28 15:47:03.882 UTC [26] LOG:  redo done at 0/1728DD0 system usage: CPU: user: 0.00 s, system: 0.00 s, elapsed: 0.00 s
forex_db       | 2022-07-28 15:47:03.910 UTC [1] LOG:  database system is ready to accept connections
forex_to_db    |
forex_to_db    |   .   ____          _            __ _ _
forex_to_db    |  /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
forex_to_db    | ( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
forex_to_db    |  \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
forex_to_db    |   '  |____| .__|_| |_|_| |_\__, | / / / /
forex_to_db    |  =========|_|==============|___/=/_/_/_/
forex_to_db    |  :: Spring Boot ::                (v2.7.1)
forex_to_db    |
forex_to_db    | 2022-07-28 15:47:05.031  INFO 1 --- [           main] f.v.j.forex_to_db.ForexToDbApplication   : Starting ForexToDbApplication v0.0.1-SNAPSHOT using Java 17.0.2 on ce1f0c1ff9f9 with PID 1 (/forex_to_db.jar started by root in /)
forex_to_db    | 2022-07-28 15:47:05.033  INFO 1 --- [           main] f.v.j.forex_to_db.ForexToDbApplication   : No active profile set, falling back to 1 default profile: "default"
forex_to_db    | 2022-07-28 15:47:05.342  INFO 1 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
forex_to_db    | 2022-07-28 15:47:05.372  INFO 1 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 24 ms. Found 1 JPA repository interfaces.
forex_to_db    | 2022-07-28 15:47:05.602  INFO 1 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
forex_to_db    | 2022-07-28 15:47:05.638  INFO 1 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 5.6.9.Final
forex_to_db    | 2022-07-28 15:47:05.740  INFO 1 --- [           main] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
forex_to_db    | 2022-07-28 15:47:05.822  INFO 1 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
forex_to_db    | 2022-07-28 15:47:05.939  INFO 1 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
forex_to_db    | 2022-07-28 15:47:05.961  INFO 1 --- [           main] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.PostgreSQLDialect
forex_to_db    | 2022-07-28 15:47:06.323  INFO 1 --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
forex_to_db    | 2022-07-28 15:47:06.331  INFO 1 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
forex_to_db    | 2022-07-28 15:47:06.622  INFO 1 --- [           main] f.v.j.forex_to_db.ForexToDbApplication   : Started ForexToDbApplication in 1.85 seconds (JVM running for 2.105)
forex_to_db    | ForexToDbApplication.run(String... args) checks that apikey for apilayer forex API is available:
forex_to_db    | Using apikey value: vGLeIBxS5cqpW6nbrEEIIbzWGmmCAbEF
forex_to_db    | NonWebService.fetchAndSaveForexData read docker environment variable apikey: vGLeIBxS5cqpW6nbrEEIIbzWGmmCAbEF
forex_to_db    | ForexDAO.fetch() started with apikey:vGLeIBxS5cqpW6nbrEEIIbzWGmmCAbEF
forex_to_db    | +++ responseBody : {
forex_to_db    |     "success": true,
forex_to_db    |     "query": {
forex_to_db    |         "from": "EUR",
forex_to_db    |         "to": "USD",
forex_to_db    |         "amount": 1
forex_to_db    |     },
forex_to_db    |     "info": {
forex_to_db    |         "timestamp": 1659023224,
forex_to_db    |         "rate": 1.016327
forex_to_db    |     },
forex_to_db    |     "date": "2022-07-28",
forex_to_db    |     "result": 1.016327
forex_to_db    | }
forex_to_db    |
forex_to_db    | +++ json: {
forex_to_db    |     "success": true,
forex_to_db    |     "query": {
forex_to_db    |         "from": "EUR",
forex_to_db    |         "to": "USD",
forex_to_db    |         "amount": 1
forex_to_db    |     },
forex_to_db    |     "info": {
forex_to_db    |         "timestamp": 1659023224,
forex_to_db    |         "rate": 1.016327
forex_to_db    |     },
forex_to_db    |     "date": "2022-07-28",
forex_to_db    |     "result": 1.016327
forex_to_db    | }
forex_to_db    |
forex_to_db    | +++ response : {"rate_date":"2022-07-28 15:47:04","from_amount":1,"from":"EUR","to_amount":1.016327,"to":"USD","rate":1.016327}
forex_to_db    | new row after fetchAndSaveForexData: {"id":53,"date":"2022-07-28 15:47:04","from":"EUR","to":"USD","rate":1.016327}
forex_to_db    | NonWebService.fetchAndSaveForexData read docker environment variable apikey: vGLeIBxS5cqpW6nbrEEIIbzWGmmCAbEF
forex_to_db    | ForexDAO.fetch() started with apikey:vGLeIBxS5cqpW6nbrEEIIbzWGmmCAbEF
forex_to_db    | +++ responseBody : {
forex_to_db    |     "success": true,
forex_to_db    |     "query": {
forex_to_db    |         "from": "USD",
forex_to_db    |         "to": "EUR",
forex_to_db    |         "amount": 1
forex_to_db    |     },
forex_to_db    |     "info": {
forex_to_db    |         "timestamp": 1659023224,
forex_to_db    |         "rate": 0.983935
forex_to_db    |     },
forex_to_db    |     "date": "2022-07-28",
forex_to_db    |     "result": 0.983935
forex_to_db    | }
forex_to_db    |
forex_to_db    | +++ json: {
forex_to_db    |     "success": true,
forex_to_db    |     "query": {
forex_to_db    |         "from": "USD",
forex_to_db    |         "to": "EUR",
forex_to_db    |         "amount": 1
forex_to_db    |     },
forex_to_db    |     "info": {
forex_to_db    |         "timestamp": 1659023224,
forex_to_db    |         "rate": 0.983935
forex_to_db    |     },
forex_to_db    |     "date": "2022-07-28",
forex_to_db    |     "result": 0.983935
forex_to_db    | }
forex_to_db    |
forex_to_db    | +++ response : {"rate_date":"2022-07-28 15:47:04","from_amount":1,"from":"USD","to_amount":0.983935,"to":"EUR","rate":0.983935}
forex_to_db    | new row after fetchAndSaveForexData: {"id":54,"date":"2022-07-28 15:47:04","from":"USD","to":"EUR","rate":0.983935}
forex_to_db    |
forex_to_db    | forex_db database table rows:
forex_to_db    | [{"id":1,"date":"2022-01-01 12:00:00","from":"EUR","to":"NOK","rate":10.1}
forex_to_db    | , {"id":2,"date":"2022-01-03 12:00:00","from":"EUR","to":"NOK","rate":10.3}
forex_to_db    | , {"id":3,"date":"2022-01-07 12:00:00","from":"EUR","to":"NOK","rate":10.7}
forex_to_db    | , {"id":4,"date":"2022-07-26 14:05:05","from":"EUR","to":"USD","rate":1.013074}
forex_to_db    | , {"id":5,"date":"2022-07-26 14:05:05","from":"USD","to":"EUR","rate":0.987095}
forex_to_db    | , {"id":6,"date":"2022-07-26 14:59:03","from":"EUR","to":"USD","rate":1.013002}
forex_to_db    | , {"id":7,"date":"2022-07-26 14:59:03","from":"USD","to":"EUR","rate":0.987165}
forex_to_db    | , {"id":8,"date":"2022-07-26 20:49:04","from":"USD","to":"EUR","rate":0.98835}
forex_to_db    | , {"id":41,"date":"2022-07-26 20:53:04","from":"EUR","to":"USD","rate":1.011762}
forex_to_db    | , {"id":42,"date":"2022-07-26 20:53:04","from":"USD","to":"EUR","rate":0.988375}
forex_to_db    | , {"id":43,"date":"2022-07-26 20:59:04","from":"EUR","to":"USD","rate":1.011788}
forex_to_db    | , {"id":44,"date":"2022-07-26 20:59:04","from":"USD","to":"EUR","rate":0.98835}
forex_to_db    | , {"id":45,"date":"2022-07-26 21:25:04","from":"EUR","to":"USD","rate":1.012095}
forex_to_db    | , {"id":46,"date":"2022-07-26 21:25:04","from":"USD","to":"EUR","rate":0.98805}
forex_to_db    | , {"id":47,"date":"2022-07-26 21:59:03","from":"EUR","to":"USD","rate":1.01189}
forex_to_db    | , {"id":48,"date":"2022-07-26 21:59:03","from":"USD","to":"EUR","rate":0.98825}
forex_to_db    | , {"id":49,"date":"2022-07-27 05:02:03","from":"EUR","to":"USD","rate":1.014945}
forex_to_db    | , {"id":50,"date":"2022-07-27 05:02:03","from":"USD","to":"EUR","rate":0.985275}
forex_to_db    | , {"id":51,"date":"2022-07-27 06:04:03","from":"EUR","to":"USD","rate":1.015409}
forex_to_db    | , {"id":52,"date":"2022-07-27 06:04:03","from":"USD","to":"EUR","rate":0.984825}
forex_to_db    | , {"id":53,"date":"2022-07-28 15:47:04","from":"EUR","to":"USD","rate":1.016327}
forex_to_db    | , {"id":54,"date":"2022-07-28 15:47:04","from":"USD","to":"EUR","rate":0.983935}
forex_to_db    | ]
forex_to_db    |
forex_to_db    | now: 15:47:08
forex_to_db    | next full hour: 16:00:00
forex_to_db    | sleep time to next full hh: 12 min 51 seconds
forex_to_db    | NonWebService.fetchAndSaveForexData read docker environment variable apikey: vGLeIBxS5cqpW6nbrEEIIbzWGmmCAbEF
forex_to_db    | ForexDAO.fetch() started with apikey:vGLeIBxS5cqpW6nbrEEIIbzWGmmCAbEF
forex_to_db    | +++ responseBody : {
forex_to_db    |     "success": true,
forex_to_db    |     "query": {
forex_to_db    |         "from": "EUR",
forex_to_db    |         "to": "USD",
forex_to_db    |         "amount": 1
forex_to_db    |     },
forex_to_db    |     "info": {
forex_to_db    |         "timestamp": 1659024004,
forex_to_db    |         "rate": 1.016203
forex_to_db    |     },
forex_to_db    |     "date": "2022-07-28",
forex_to_db    |     "result": 1.016203
forex_to_db    | }
forex_to_db    |
forex_to_db    | +++ json: {
forex_to_db    |     "success": true,
forex_to_db    |     "query": {
forex_to_db    |         "from": "EUR",
forex_to_db    |         "to": "USD",
forex_to_db    |         "amount": 1
forex_to_db    |     },
forex_to_db    |     "info": {
forex_to_db    |         "timestamp": 1659024004,
forex_to_db    |         "rate": 1.016203
forex_to_db    |     },
forex_to_db    |     "date": "2022-07-28",
forex_to_db    |     "result": 1.016203
forex_to_db    | }
forex_to_db    |
forex_to_db    | +++ response : {"rate_date":"2022-07-28 16:00:04","from_amount":1,"from":"EUR","to_amount":1.016203,"to":"USD","rate":1.016203}
forex_to_db    | new row after fetchAndSaveForexData: {"id":55,"date":"2022-07-28 16:00:04","from":"EUR","to":"USD","rate":1.016203}
forex_to_db    | NonWebService.fetchAndSaveForexData read docker environment variable apikey: vGLeIBxS5cqpW6nbrEEIIbzWGmmCAbEF
forex_to_db    | ForexDAO.fetch() started with apikey:vGLeIBxS5cqpW6nbrEEIIbzWGmmCAbEF
forex_to_db    | +++ responseBody : {
forex_to_db    |     "success": true,
forex_to_db    |     "query": {
forex_to_db    |         "from": "USD",
forex_to_db    |         "to": "EUR",
forex_to_db    |         "amount": 1
forex_to_db    |     },
forex_to_db    |     "info": {
forex_to_db    |         "timestamp": 1659024004,
forex_to_db    |         "rate": 0.984055
forex_to_db    |     },
forex_to_db    |     "date": "2022-07-28",
forex_to_db    |     "result": 0.984055
forex_to_db    | }
forex_to_db    |
forex_to_db    | +++ json: {
forex_to_db    |     "success": true,
forex_to_db    |     "query": {
forex_to_db    |         "from": "USD",
forex_to_db    |         "to": "EUR",
forex_to_db    |         "amount": 1
forex_to_db    |     },
forex_to_db    |     "info": {
forex_to_db    |         "timestamp": 1659024004,
forex_to_db    |         "rate": 0.984055
forex_to_db    |     },
forex_to_db    |     "date": "2022-07-28",
forex_to_db    |     "result": 0.984055
forex_to_db    | }
forex_to_db    |
forex_to_db    | +++ response : {"rate_date":"2022-07-28 16:00:04","from_amount":1,"from":"USD","to_amount":0.984055,"to":"EUR","rate":0.984055}
forex_to_db    | new row after fetchAndSaveForexData: {"id":56,"date":"2022-07-28 16:00:04","from":"USD","to":"EUR","rate":0.984055}
forex_to_db    |
forex_to_db    | forex_db database table rows:
forex_to_db    | [{"id":1,"date":"2022-01-01 12:00:00","from":"EUR","to":"NOK","rate":10.1}
forex_to_db    | , {"id":2,"date":"2022-01-03 12:00:00","from":"EUR","to":"NOK","rate":10.3}
forex_to_db    | , {"id":3,"date":"2022-01-07 12:00:00","from":"EUR","to":"NOK","rate":10.7}
forex_to_db    | , {"id":4,"date":"2022-07-26 14:05:05","from":"EUR","to":"USD","rate":1.013074}
forex_to_db    | , {"id":5,"date":"2022-07-26 14:05:05","from":"USD","to":"EUR","rate":0.987095}
forex_to_db    | , {"id":6,"date":"2022-07-26 14:59:03","from":"EUR","to":"USD","rate":1.013002}
forex_to_db    | , {"id":7,"date":"2022-07-26 14:59:03","from":"USD","to":"EUR","rate":0.987165}
forex_to_db    | , {"id":8,"date":"2022-07-26 20:49:04","from":"USD","to":"EUR","rate":0.98835}
forex_to_db    | , {"id":41,"date":"2022-07-26 20:53:04","from":"EUR","to":"USD","rate":1.011762}
forex_to_db    | , {"id":42,"date":"2022-07-26 20:53:04","from":"USD","to":"EUR","rate":0.988375}
forex_to_db    | , {"id":43,"date":"2022-07-26 20:59:04","from":"EUR","to":"USD","rate":1.011788}
forex_to_db    | , {"id":44,"date":"2022-07-26 20:59:04","from":"USD","to":"EUR","rate":0.98835}
forex_to_db    | , {"id":45,"date":"2022-07-26 21:25:04","from":"EUR","to":"USD","rate":1.012095}
forex_to_db    | , {"id":46,"date":"2022-07-26 21:25:04","from":"USD","to":"EUR","rate":0.98805}
forex_to_db    | , {"id":47,"date":"2022-07-26 21:59:03","from":"EUR","to":"USD","rate":1.01189}
forex_to_db    | , {"id":48,"date":"2022-07-26 21:59:03","from":"USD","to":"EUR","rate":0.98825}
forex_to_db    | , {"id":49,"date":"2022-07-27 05:02:03","from":"EUR","to":"USD","rate":1.014945}
forex_to_db    | , {"id":50,"date":"2022-07-27 05:02:03","from":"USD","to":"EUR","rate":0.985275}
forex_to_db    | , {"id":51,"date":"2022-07-27 06:04:03","from":"EUR","to":"USD","rate":1.015409}
forex_to_db    | , {"id":52,"date":"2022-07-27 06:04:03","from":"USD","to":"EUR","rate":0.984825}
forex_to_db    | , {"id":53,"date":"2022-07-28 15:47:04","from":"EUR","to":"USD","rate":1.016327}
forex_to_db    | , {"id":54,"date":"2022-07-28 15:47:04","from":"USD","to":"EUR","rate":0.983935}
forex_to_db    | , {"id":55,"date":"2022-07-28 16:00:04","from":"EUR","to":"USD","rate":1.016203}
forex_to_db    | , {"id":56,"date":"2022-07-28 16:00:04","from":"USD","to":"EUR","rate":0.984055}
forex_to_db    | ]
forex_to_db    |
forex_to_db    | 2022-07-28 16:00:09.449  INFO 1 --- [ionShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
forex_to_db    | 2022-07-28 16:00:09.451  INFO 1 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
forex_to_db    | 2022-07-28 16:00:09.453  INFO 1 --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
forex_to_db exited with code 0
Stopping forex_db    ...
Stopping forex_db    ... done
Gracefully stopping... (press Ctrl+C again to force)

AzureAD+JuhaVälimäki@VRNXLHT029 MINGW64 ~/eclipse-space/forex_to_db/src/main/docker
$ docker-compose down
The apikey variable is not set. Defaulting to a blank string.
The run_max_hours variable is not set. Defaulting to a blank string.
Removing forex_to_db ...
Removing forex_db    ...
Removing forex_db    ... done
Removing forex_to_db ... done
Removing network docker_default

AzureAD+JuhaVälimäki@VRNXLHT029 MINGW64 ~/eclipse-space/forex_to_db/src/main/docker
$

